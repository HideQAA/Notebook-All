## MVC 模型-视图-控制器

M是业务逻辑、V是用户界面，使其两者的实现代码分离，使同一个程序使用不同的表现形式。C为控制器，用来确保M和V的同步。

----

### MVC 编程模式 ###


**Model（模型）**是应用程序中用于处理应用程序数据逻辑的部分，通常模型对象负责在数据库中存取数据。


**View（视图**）是应用程序中处理数据显示的部分，通常视图是依据模型数据创建的。


**Controller（控制器）**是应用程序中处理用户交互的部分，通常控制器负责从视图读取数据，控制用户输入，并向模型发送数据。


---

### 框架内容 ###

最典型的MVC就是JSP + servlet + javabean的模式


**视图** 是用户看到并与之交互的界面，视图就是由HTML元素组成的界面，在视图中其实没有真正的处理发生，它只是作为一种输出数据并允许用户操纵的方式。


**模型** 表示企业数据和业务规则，模型拥有最多的处理任务，被模型返回的数据是中立的，就是说模型与数据格式无关，这样一个模型能为多个视图提供数据。


**控制器** 接受用户的输入并调用模型和视图去完成用户的需求，当单击Web页面中的超链接和发送HTML表单时，控制器本身不输出任何东西和做任何处理。它只是接收请求并决定调用哪个模型构件去处理请求，然后再确定用哪个视图来显示返回的数据。


---

### service domain dao 分层思路 ###

**dao层** 操作单表，不涉及复杂逻辑，主要是表的增删改查操作，完全根据domain的要求来查询数据。 **（持久层：读写数据库）**


**domain层** 考虑业务逻辑，例如过滤条件，放行或者返回，以及数据的处理，为调用dao层做好准备，一个domain可以调用一个或者一组相关的dao层。 **（主控制层：控制用户数据收集，控制请求转向）**

**service层** 调用一个或者一组domain层，主要是展现需要开放出去的接口，其中domain层不是所有的接口都要在service层体现的，可能仅在service层开放几个接口出去，此外，主要接口需要对接受的参数要尽量的扩大化，也就是说可以容纳各种类型的参数的接入（Object），然后需要在service层做好转换，以备domain层使用。 **（业务逻辑层：处理数据逻辑，验证数据）**

**工作流程**：

**web发出请求---domain接收控制数据转向(可以返回也可以进入service)---service验证数据正确性或者是否符合业务要求---dao存入，读出，依次返回**


**正确的设计应该是，一个领域活动会聚合对应一个或一组DAO ，来完成一个领域活动。而一个服务可能包含两个领域活动，比如一个转账的业务，对应两个领域活动。两个帐户的金额分别发生变化，需要操作一组领域活动，而每个活动需要操作很多表（调用多个DAO ）。**


**使用 接口方式可以实现系统之间的松耦合**：

**一般定义： IUserService、UserService、IUserDomain、UserDomain、IUserDao、UserSqlDao、UserHbaseDao**

**使用接口可以有不同的实现类 ,不需要改代码，可以通过配置更改不同的实现类**
